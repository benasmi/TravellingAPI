<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.travel.travelapi.services.PlaceService">

    <select id="selectAll"  resultType="com.travel.travelapi.models.PlaceLocal">
        SELECT * FROM PLACE
    </select>

    <select id="search" resultType="com.travel.travelapi.models.PlaceLocal">
        SELECT * FROM PLACE WHERE placeId IN
        <foreach item='item' index='index' collection='ids' open='(' separator=',' close=')'>
            #{item}
        </foreach>
    </select>

    <select id="selectAllAdmin" resultType="com.travel.travelapi.models.PlaceLocal">
            SELECT * FROM PLACE WHERE MATCH (name,description,city,country) AGAINST (#{keyword} IN NATURAL LANGUAGE MODE)
    </select>

    <select id="selectById" resultType="com.travel.travelapi.models.PlaceLocal">
        SELECT * FROM PLACE WHERE placeId=#{id}
    </select>

    <!--    NOT TESTED-->
    <update id="updatePlace" >
        UPDATE PLACE SET name=#{p.name}, description=#{p.description}, city=#{p.city},
        country=#{p.country}, latitude=#{p.latitude}, longitude=#{p.longitude}, address=#{p.address},
        phoneNumber=#{p.phoneNumber}, website=#{p.website}, hasSchedule=#{p.hasSchedule}, isPublished=#{p.isPublished}
        WHERE placeId=#{p.placeId}
    </update>

    <!--    NOT TESTED-->
    <insert id="insertPlace" useGeneratedKeys="true" keyProperty="placeId" keyColumn="placeId">
        INSERT INTO PLACE (name, description, averageTimeSpent, latitude, longitude, address, country, city, phoneNumber, website, hasSchedule, isPublished)
        VALUES (#{p.name},#{p.description}, #{p.averageTimeSpent}, #{p.latitude}, #{p.longitude}, #{p.address}, #{p.country}, #{p.city}, #{p.phoneNumber}, #{p.website}, #{p.hasSchedule}, #{p.isPublished})
    </insert>

</mapper>